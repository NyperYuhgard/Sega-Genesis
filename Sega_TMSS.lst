00000000                                org $0
00000000                            
00000000                            
00000000                                include "src/ports.inc"
00000000                            ; ports
00000000 =00A10008                  IO_CT1_CTRL equ $A10008
00000000 =00A10002                  IO_CT1_DATA equ $A10002
00000000 =00A1000E                  IO_CT1_RX equ $A1000E
00000000 =00A10012                  IO_CT1_SMODE equ $A10012
00000000 =00A10010                  IO_CT1_TX equ $A10010
00000000 =00A1000A                  IO_CT2_CTRL equ $A1000A
00000000 =00A10004                  IO_CT2_DATA equ $A10004
00000000 =00A10014                  IO_CT2_RX equ $A10014
00000000 =00A10018                  IO_CT2_SMODE equ $A10018
00000000 =00A10016                  IO_CT2_TX equ $A10016
00000000 =00A1000C                  IO_EXT_CTRL equ $A1000C
00000000 =00A10006                  IO_EXT_DATA equ $A10006
00000000 =00A1001A                  IO_EXT_RX equ $A1001A
00000000 =00A1001E                  IO_EXT_SMODE equ $A1001E
00000000 =00A1001C                  IO_EXT_TX equ $A1001C
00000000 =00A12000                  IO_FDC equ $A12000
00000000 =00A10000                  IO_PCBVER equ $A10000
00000000 =00A11000                  IO_RAMMODE equ $A11000
00000000 =00A13000                  IO_TIME equ $A13000
00000000 =00A14000                  IO_TMSS equ $A14000
00000000 =00A11100                  IO_Z80BUS equ $A11100
00000000 =00A11200                  IO_Z80RES equ $A11200
00000000 =00C00008                  VDP_CNTR equ $C00008
00000000 =00C00004                  VDP_CTRL equ $C00004
00000000 =00C00000                  VDP_DATA equ $C00000
00000000 =00C00011                  VDP_PSG equ $C00011
00000000 =00C0000A                  VDP__CNTR equ $C0000A
00000000 =00C00006                  VDP__CTRL equ $C00006
00000000 =00C00002                  VDP__DATA equ $C00002
00000000 =00C0000C                  VDP___CNTR equ $C0000C
00000000 =00C0000E                  VDP____CNTR equ $C0000E
00000000                            ; ports
00000000                            
00000000                            
00000000                            
00000000                            
00000000                                include "src/equals.inc"
00000000                                include "src/equals.inc"
00000000                                include "src/ram_addrs.inc"
00000000                            ; ---------- ram names -------------
00000000 =FFFF0000                  M68K_RAM equ $FFFF0000
00000000 =FFFFC000                  unk_FFC000 equ $FFFFC000
00000000 =FFFFFF00                  System_Stack equ $FFFFFF00
00000000 =FFFFFFFF                  unk_FFFFFF equ $FFFFFFFF
00000000 =00A00000                  Z80_RAM equ $A00000
00000000 =00A04000                  Z80_YM2612 equ $A04000
00000000                            ; ----------------------------------
00000000                            
00000000                            
00000000                            
00000000                            
00000000                            ;
00000000                            ; +-------------------------------------------------------------------------+
00000000                            ; |      This file was generated by The Interactive Disassembler (IDA)      |
00000000                            ; |           Copyright (c) 2025 Hex-Rays, <support@hex-rays.com>           |
00000000                            ; |                      ChinaPYG, 2022 Happy New Year                      |
00000000                            ; +-------------------------------------------------------------------------+
00000000                            ;
00000000                            ; Input SHA256 : 5A5497F47BF3892D60476151494B8E5B7949E6DB728ED513D162095D54DE1B9A
00000000                            ; Input MD5    : D3293EBAAA7F4EB2A6766B68A0FB4609
00000000                            ; Input CRC32  : 3F888CF4
00000000                            ; Processor       : 68020
00000000                            ; Target assembler: 680x0 Assembler in MRI compatible mode
00000000                            ; This file should be compiled with "as -M"
00000000                            ; ===========================================================================
00000000                            ; Segment type: Pure code
00000000                            ; segment "ROM"
00000000                            ; ROM segment
00000000 00FF FF00                                  dc.l System_Stack&$FFFFFF
00000004 0000 0000                                  dc.l Reset
00000008 0000 0000                                  dc.l Reserv3F
0000000C 0000 0000                                  dc.l Reserv3F
00000010 0000 0000                                  dc.l Reserv3F
00000014 0000 0000                                  dc.l Reserv3F
00000018 0000 0000                                  dc.l Reserv3F
0000001C 0000 0000                                  dc.l Reserv3F
00000020 0000 0000                                  dc.l Reserv3F
00000024 0000 0000                                  dc.l Reserv3F
00000028 0000 0000                                  dc.l Reserv3F
0000002C 0000 0000                                  dc.l Reserv3F
00000030 0000 0000                                  dc.l Reserv3F
00000034 0000 0000                                  dc.l Reserv3F
00000038 0000 0000                                  dc.l Reserv3F
0000003C 0000 0000                                  dc.l Reserv3F
00000040 0000 0000                                  dc.l Reserv3F
00000044 0000 0000                                  dc.l Reserv3F
00000048 0000 0000                                  dc.l Reserv3F
0000004C 0000 0000                                  dc.l Reserv3F
00000050 0000 0000                                  dc.l Reserv3F
00000054 0000 0000                                  dc.l Reserv3F
00000058 0000 0000                                  dc.l Reserv3F
0000005C 0000 0000                                  dc.l Reserv3F
00000060 0000 0000                                  dc.l Reserv3F
00000064 0000 0000                                  dc.l Reserv3F
00000068 0000 0000                                  dc.l Reserv3F
0000006C 0000 0000                                  dc.l Reserv3F
00000070 0000 0000                                  dc.l Reserv3F
00000074 0000 0000                                  dc.l Reserv3F
00000078 0000 0000                                  dc.l Reserv3F
0000007C 0000 0000                                  dc.l Reserv3F
00000080 0000 0000                                  dc.l Reserv3F
00000084 0000 0000                                  dc.l Reserv3F
00000088 0000 0000                                  dc.l Reserv3F
0000008C 0000 0000                                  dc.l Reserv3F
00000090 0000 0000                                  dc.l Reserv3F
00000094 0000 0000                                  dc.l Reserv3F
00000098 0000 0000                                  dc.l Reserv3F
0000009C 0000 0000                                  dc.l Reserv3F
000000A0 0000 0000                                  dc.l Reserv3F
000000A4 0000 0000                                  dc.l Reserv3F
000000A8 0000 0000                                  dc.l Reserv3F
000000AC 0000 0000                                  dc.l Reserv3F
000000B0 0000 0000                                  dc.l Reserv3F
000000B4 0000 0000                                  dc.l Reserv3F
000000B8 0000 0000                                  dc.l Reserv3F
000000BC 0000 0000                                  dc.l Reserv3F
000000C0 0000 0000                                  dc.l Reserv3F
000000C4 0000 0000                                  dc.l Reserv3F
000000C8 0000 0000                                  dc.l Reserv3F
000000CC 0000 0000                                  dc.l Reserv3F
000000D0 0000 0000                                  dc.l Reserv3F
000000D4 0000 0000                                  dc.l Reserv3F
000000D8 0000 0000                                  dc.l Reserv3F
000000DC 0000 0000                                  dc.l Reserv3F
000000E0 0000 0000                                  dc.l Reserv3F
000000E4 0000 0000                                  dc.l Reserv3F
000000E8 0000 0000                                  dc.l Reserv3F
000000EC 0000 0000                                  dc.l Reserv3F
000000F0 0000 0000                                  dc.l Reserv3F
000000F4 0000 0000                                  dc.l Reserv3F
000000F8 0000 0000                                  dc.l Reserv3F
000000FC 0000 0000                                  dc.l Reserv3F
00000100 5345 4741 2047 454E 4553+  ConsoleName:    dc.b 'SEGA GENESIS    ' ; DATA XREF: ROM:000002F4   r
00000110                                                                    ; ROM:000002FA   r
00000110 2843 2953 4547 4120 3139+  CopyRight:      dc.b '(C)SEGA 1990.MAY'
00000120 4745 4E45 5349 5320 4F53+  DomesticName:   dc.b 'GENESIS OS                                      '
00000150 4745 4E45 5349 5320 4F53+  OverseasName:   dc.b 'GENESIS OS                                      '
00000180 4F53 2030 3030 3030 3030+  ProductCode:    dc.b 'OS 00000000-00'
0000018E 5B74                       Checksum:       dc.w $5B74
00000190 2020 2020 2020 2020 2020+  Peripherials:   dc.b '                '
000001A0 0000 0000                  RomStart:       dc.l         0
000001A4 0000 0000                  RomEnd:         dc.l Padding+$4B
000001A8 00FF 0000                  RamStart:       dc.l M68K_RAM&$FFFFFF
000001AC 00FF FFFF                  RamEnd:         dc.l unk_FFFFFF&$FFFFFF
000001B0 2020 2020 2020 2020 2020+  SramCode:       dc.b $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001BC 2020 2020 2020 2020 2020+  ModemCode:      dc.b $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001C8 2020 2020 2020 2020 2020+  Reserved:       dc.b $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001D5 2020 2020 2020 2020 2020+                  dc.b $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001E2 2020 2020 2020 2020 2020+                  dc.b $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001EF 20                                         dc.b $20
000001F0 5520 2020 2020 2020 2020+  CountryCode:    dc.b $55,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
000001FD 2020 20                                    dc.b $20,$20,$20
00000200                            
00000200                            
00000200                            Reserv3F:                               ; CODE XREF: Reserv3F   j
00000200 60FE                                       bra.s   Reserv3F
00000202                            ; End of function Reserv3F
00000202                            
00000202                            
00000202                            Reset:
00000202 4BFA 0000                                  lea     SetupValues(pc),a5
00000206 4CDD 1FE0                                  movem.l (a5)+,d5-d7/a0-a4
0000020A 1029 EF01                                  move.b  -$10FF(a1),d0
0000020E 0200 000F                                  andi.b  #$F,d0
00000212 6700                                       beq.s   SkipSecurity
00000214 237C 5345 4741 2F00                        move.l  #'SEGA',$2F00(a1)
0000021C                            SkipSecurity:                           ; CODE XREF: Reset+10   j
0000021C 3014                                       move.w  (a4),d0
0000021E 7000                                       moveq   #0,d0
00000220 2C40                                       movea.l d0,a6
00000222 4E66                                       move.l  a6,usp
00000224 7217                                       moveq   #$17,d1
00000226                            loc_226:                                ; CODE XREF: Reset+2A   j
00000226 1A1D                                       move.b  (a5)+,d5
00000228 3885                                       move.w  d5,(a4)
0000022A DA47                                       add.w   d7,d5
0000022C 51C9 FFF8                                  dbf     d1,loc_226
00000230 28BC 4000 0080                             move.l  #$40000080,(a4)
00000236 3680                                       move.w  d0,(a3)
00000238                            loc_238:                                ; CODE XREF: Reset+3C   j
00000238 3814                                       move.w  (a4),d4
0000023A 0804 0001                                  btst    #1,d4
0000023E 66F8                                       bne.s   loc_238
00000240 28BC 8104 8F02                             move.l  #$81048F02,(a4)
00000246 28BC C000 0000                             move.l  #$C0000000,(a4)
0000024C 761F                                       moveq   #$1F,d3
0000024E                            loc_24E:                                ; CODE XREF: Reset+4E   j
0000024E 2680                                       move.l  d0,(a3)
00000250 51CB FFFC                                  dbf     d3,loc_24E
00000254 28BC 4000 0010                             move.l  #$40000010,(a4)
0000025A 7813                                       moveq   #$13,d4
0000025C                            loc_25C:                                ; CODE XREF: Reset+5C   j
0000025C 2680                                       move.l  d0,(a3)
0000025E 51CC FFFC                                  dbf     d4,loc_25C
00000262 7A03                                       moveq   #3,d5
00000264                            loc_264:                                ; CODE XREF: Reset+66   j
00000264 175D 0011                                  move.b  (a5)+,$11(a3)
00000268 51CD FFFA                                  dbf     d5,loc_264
0000026C 6000                                       bra.s   loc_2AA
0000026E                            ; ---------------------------------------------------------------------------
0000026E 0000                       SetupValues:    dc.w 0                  ; DATA XREF: Reset   o
00000270 8000                                       dc.w $8000
00000272 0000 3FFF                                  dc.l $3FFF
00000276 0000                                       dc.w 0
00000278 0100                                       dc.w $100
0000027A 00A0 0000                                  dc.l Z80_RAM
0000027E 00A1 1100                                  dc.l IO_Z80BUS
00000282 00A1 1200                                  dc.l IO_Z80RES
00000286 00C0 0000                                  dc.l VDP_DATA
0000028A 00C0 0004                                  dc.l VDP_CTRL
0000028E 04                         VDPInitValues:  dc.b   4
0000028F 14                                         dc.b $14
00000290 30                                         dc.b $30 ; 0
00000291 3C                                         dc.b $3C ; <
00000292 07                                         dc.b   7
00000293 6C                                         dc.b $6C ; l
00000294 00                                         dc.b   0
00000295 00                                         dc.b   0
00000296 00                                         dc.b   0
00000297 00                                         dc.b   0
00000298 FF                                         dc.b $FF
00000299 00                                         dc.b   0
0000029A 81                                         dc.b $81
0000029B 37                                         dc.b $37 ; 7
0000029C 00                                         dc.b   0
0000029D 01                                         dc.b   1
0000029E 01                                         dc.b   1
0000029F 00                                         dc.b   0
000002A0 00                                         dc.b   0
000002A1 FF                                         dc.b $FF
000002A2 FF                                         dc.b $FF
000002A3 00                                         dc.b   0
000002A4 00                                         dc.b   0
000002A5 80                                         dc.b $80
000002A6 9F                         PSGInitValues:  dc.b $9F
000002A7 BF                                         dc.b $BF
000002A8 DF                                         dc.b $DF
000002A9 FF                                         dc.b $FF
000002AA                            ; ---------------------------------------------------------------------------
000002AA                            loc_2AA:                                ; CODE XREF: Reset+6A   j
000002AA 41F8 C000                                  lea     (unk_FFC000).w,a0
000002AE 43FA 0000                                  lea     aSege(pc),a1    ; " SEGE"
000002B2 4CD9 7CF0                                  movem.l (a1)+,d4-d7/a2-a6
000002B6 303C 003F                                  move.w  #$3F,d0 ; '?'
000002BA                            loc_2BA:                                ; CODE XREF: Reset+BA   j
000002BA 30D9                                       move.w  (a1)+,(a0)+
000002BC 51C8 FFFC                                  dbf     d0,loc_2BA
000002C0 4EB8 C000                                  jsr     (unk_FFC000).w
000002C4                            loc_2C4:                                ; CODE XREF: Reset:loc_2C4   j
000002C4 60FE                                       bra.s   loc_2C4
000002C6                            ; End of function Reset
000002C6                            ; ---------------------------------------------------------------------------
000002C6 2053 4547 45               aSege:          dc.b ' SEGE'            ; DATA XREF: Reset+AC   o
000002CB 9400 0300 0000 F7                          dc.b $94, 0, 3, 0, 0, 0, $F7
000002D2 5345 4741                  aSega:          dc.b 'SEGA'
000002D6 00A1 4000 00A1 4101 00C0+                  dc.b 0, $A1, $40, 0, 0, $A1, $41, 1, 0, $C0, 0, 4, 0, $C0
000002E4 0000 00A1 0001 08D3 0000+                  dc.b 0, 0, 0, $A1, 0, 1, 8, $D3, 0, 0, $BE, $B8
000002F0                            ; ---------------------------------------------------------------------------
000002F0                            loc_2F0:
000002F0 0100                                       btst    d0,d0
000002F2 6700                                       beq.s   loc_316
000002F4 B8B8 0100                                  cmp.l   (ConsoleName).w,d4 ; "SEGA GENESIS    "
000002F8 6600                                       bne.s   loc_302
000002FA 0C38 0041 0104                             cmpi.b  #$41,(ConsoleName+4).w ; 'A' ; " GENESIS    "
00000300 6700                                       beq.s   loc_316
00000302                            loc_302:                                ; CODE XREF: ROM:000002F8   j
00000302 0893 0000                                  bclr    #0,(a3)
00000306 1016                                       move.b  (a6),d0
00000308 0200 000F                                  andi.b  #$F,d0
0000030C 6700                                       beq.s   locret_314
0000030E 24BC 0000 0000                             move.l  #0,(a2)
00000314                            locret_314:                             ; CODE XREF: ROM:0000030C   j
00000314 4E75                                       rts
00000316                            ; ---------------------------------------------------------------------------
00000316                            loc_316:                                ; CODE XREF: ROM:000002F2   j
00000316                                                                    ; ROM:00000300   j
00000316 0893 0000                                  bclr    #0,(a3)
0000031A 4EB9 0000 0000                             jsr     (loc_78C).l
00000320 28BC 4C20 0000                             move.l  #$4C200000,(a4)
00000326                            loc_326:                                ; CODE XREF: ROM:00000328   j
00000326 2A99                                       move.l  (a1)+,(a5)
00000328 51CE FFFC                                  dbf     d6,loc_326
0000032C 4EB9 0000 0000                             jsr     (loc_79C).l
00000332 38BC 8144                                  move.w  #$8144,(a4)
00000336 303C 003C                                  move.w  #$3C,d0 ; '<'
0000033A 6100                                       bsr.s   loc_35C
0000033C 38BC 8104                                  move.w  #$8104,(a4)
00000340 1016                                       move.b  (a6),d0
00000342 0200 000F                                  andi.b  #$F,d0
00000346 6700                                       beq.s   loc_34E
00000348 24BC 0000 0000                             move.l  #0,(a2)
0000034E                            loc_34E:                                ; CODE XREF: ROM:00000346   j
0000034E 08D3 0000                                  bset    #0,(a3)
00000352 7000                                       moveq   #0,d0
00000354 2040                                       movea.l d0,a0
00000356 2E58                                       movea.l (a0)+,sp
00000358 2058                                       movea.l (a0)+,a0
0000035A 4ED0                                       jmp     (a0)
0000035C                            ; ---------------------------------------------------------------------------
0000035C                            loc_35C:                                ; CODE XREF: ROM:0000033A   p
0000035C                                                                    ; ROM:00000364   j
0000035C 323C 95CE                                  move.w  #$95CE,d1
00000360                            loc_360:                                ; CODE XREF: ROM:loc_360   j
00000360 51C9 FFFE                                  dbf     d1,loc_360
00000364 51C8 FFF6                                  dbf     d0,loc_35C
00000368 4E75                                       rts
0000036A                            ; ---------------------------------------------------------------------------
0000036A                            TMSS_Font_Palette:incbin "Art/Pal/TMSS_Font_Palette.pal"
00000370                                            even
00000370                            TMSS_Font:      incbin "Art/Unc/TMSS_Font.unc"
00000750                                            even
00000750 2020 2070 726F 6475 6365+  aProducedByOr:  dc.b '   produced by or'
00000761 FF                                         dc.b $FF
00000762 2075 6E64 6572 206C 6963+  aUnderLicenseFr:dc.b ' under license from'
00000775 FF                                         dc.b $FF
00000776 7365 6761 2C65 6E74 6572+  aSegaEnterprise:dc.b 'sega,enterprises ltd'
0000078A 7B                                         dc.b $7B ; {
0000078B 00                                         dc.b   0
0000078C                            ; ---------------------------------------------------------------------------
0000078C                            loc_78C:                                ; CODE XREF: ROM:0000031A   p
0000078C 3019                                       move.w  (a1)+,d0
0000078E 28BC C002 0000                             move.l  #$C0020000,(a4)
00000794                            loc_794:                                ; CODE XREF: ROM:00000796   j
00000794 3A99                                       move.w  (a1)+,(a5)
00000796 51C8 FFFC                                  dbf     d0,loc_794
0000079A 4E75                                       rts
0000079C                            ; ---------------------------------------------------------------------------
0000079C                            loc_79C:                                ; CODE XREF: ROM:0000032C   p
0000079C                                                                    ; ROM:000007B2   j
0000079C 2885                                       move.l  d5,(a4)
0000079E                            loc_79E:                                ; CODE XREF: ROM:000007AA   j
0000079E 7200                                       moveq   #0,d1
000007A0 1219                                       move.b  (a1)+,d1
000007A2 6B00                                       bmi.s   loc_7AC
000007A4 6600                                       bne.s   loc_7A8
000007A6 4E75                                       rts
000007A8                            ; ---------------------------------------------------------------------------
000007A8                            loc_7A8:                                ; CODE XREF: ROM:000007A4   j
000007A8 3A81                                       move.w  d1,(a5)
000007AA 60F2                                       bra.s   loc_79E
000007AC                            ; ---------------------------------------------------------------------------
000007AC                            loc_7AC:                                ; CODE XREF: ROM:000007A2   j
000007AC 0685 0100 0000                             addi.l  #$1000000,d5
000007B2 60E8                                       bra.s   loc_79C
000007B4                            ; ---------------------------------------------------------------------------
000007B4 FFFF FFFF FFFF FFFF FFFF   Padding:        dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007BE FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007C8 FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007D2 FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007DC FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007E6 FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007F0 FFFF FFFF FFFF FFFF FFFF                   dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF
000007FA FFFF FFFF FFFF                             dc.b $FF, $FF, $FF, $FF, $FF, $FF
00000800                            ; end of 'ROM'
